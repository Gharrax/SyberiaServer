<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="players-tab" data-toggle="tab" href="#players" role="tab" aria-controls="players" aria-selected="true">Players</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings" aria-selected="false">Settings</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="admins-tab" data-toggle="tab" href="#admins" role="tab" aria-controls="admins" aria-selected="false">Admins</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="groups-tab" data-toggle="tab" href="#groups" role="tab" aria-controls="groups" aria-selected="false">Groups</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="loadouts-tab" data-toggle="tab" href="#loadouts" role="tab" aria-controls="loadouts" aria-selected="false">Loadouts</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="traders-tab" data-toggle="tab" href="#traders" role="tab" aria-controls="traders" aria-selected="false">Traders</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="zones-tab" data-toggle="tab" href="#zones" role="tab" aria-controls="zones" aria-selected="false">Zones</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="variables-tab" data-toggle="tab" href="#variables" role="tab" aria-controls="variables" aria-selected="false">Variables</a>
    </li>
</ul>
<div class="tab-content" style="margin-top: 30px; margin-left: 50px; margin-right: 50px; margin-bottom: 30px">
    <div class="tab-pane active" id="players" role="tabpanel" aria-labelledby="players-tab">
        Players
    </div>
    <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">
        <div id="settingsForm">
            <h3>Main settings:</h3>
            <div class="form-group row">
                <label for="inputStartSoulsCount" class="col-sm-2 col-form-label">Starting souls count:</label>
                <div class="col-sm-10">
                    <input type="number" min="0" max="10000" step="1" pattern="^[\d]+$" class="form-control" onchange="validateNumberInput(this)"
                           id="inputStartSoulsCount" mapping="m_mainConfig.m_startSoulsCount" value="${m_mainConfig.m_startSoulsCount}" required>
                    <p><em>The number of souls that the player receives when creating a character.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputRespawnSoulsPrice" class="col-sm-2 col-form-label">Respawn souls price:</label>
                <div class="col-sm-10">
                    <input type="number" min="0" max="10000" step="1" pattern="^[\d]+$" class="form-control" onchange="validateNumberInput(this)"
                           id="inputRespawnSoulsPrice" mapping="m_mainConfig.m_respawnSoulsPrice" value="${m_mainConfig.m_respawnSoulsPrice}" required>
                    <p><em>The number of souls that the player loses when the character dies and are needed for respawn.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputNewChatPoints" class="col-sm-2 col-form-label">Starting skill points:</label>
                <div class="col-sm-10">
                    <input type="number" min="0" max="1000" step="1" pattern="^[\d]+$" class="form-control" onchange="validateNumberInput(this)"
                           id="inputNewChatPoints" mapping="m_mainConfig.m_newchar_points" value="${m_mainConfig.m_newchar_points}" required>
                    <p><em>The number of skill points that the player will get when creating a new character.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputRoleplayMode" class="col-sm-2 col-form-label">Disable character deletion:</label>
                <div class="col-sm-10">
                    <input class="form-check-input" type="checkbox" id="inputRoleplayMode" mapping="m_mainConfig.m_roleplay_mode" ${m_mainConfig.m_roleplay_mode}>
                    <p><em>When this option is enabled, players will not be able to delete their character on the respawn screen.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputStartMedicKit" class="col-sm-2 col-form-label">Start medic kit:</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="inputStartMedicKit" mapping="m_mainConfig.m_startMedicKit">${m_mainConfig.m_startMedicKit}</textarea>
                    <p><em>A set of starting equipment that the player can choose on respawn when character has reached level 100 of medicine skill and activated the corresponding perk. Each new item's classname must be specified on a new line. To set the amount in the stack and the damage state, you can use the rules from the loadouts category.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputStartStealthKit" class="col-sm-2 col-form-label">Start stealth kit:</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="inputStartStealthKit" mapping="m_mainConfig.m_startStealthKit">${m_mainConfig.m_startStealthKit}</textarea>
                    <p><em>A set of starting equipment that the player can choose on respawn when character has reached level 100 of stealth skill and activated the corresponding perk. Each new item's classname must be specified on a new line. To set the amount in the stack and the damage state, you can use the rules from the loadouts category.</em></p>
                </div>
            </div>
            <div class="form-group row">
                <label for="inputStartSurvivorKit" class="col-sm-2 col-form-label">Start survival kit:</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="inputStartSurvivorKit" mapping="m_mainConfig.m_startSurvivorKit">${m_mainConfig.m_startSurvivorKit}</textarea>
                    <p><em>A set of starting equipment that the player can choose on respawn when character has reached level 100 of survival skill and activated the corresponding perk. Each new item's classname must be specified on a new line. To set the amount in the stack and the damage state, you can use the rules from the loadouts category.</em></p>
                </div>
            </div>
            <br>
            <h3>Skill settings:</h3>
            <p><em>The experience multiplier defines how quickly the player gains experience in the game for each skill. The default value is 1. If you want the player to get 2 times more experience, set this value to 2. And vice versa, if you want to slow down the process of gaining experience, set the value less than one (0.5 for example)</em></p>
            <p><em>The decrease in the skill level at death determines how much experience the player will lose for each skill when the character dies. A value of 1 indicates that the player will lose 1 skill level upon death. With a value of 0.5, the player will only lose half of the level. If you want to disable the loss of experience by players on death, specify 0 as the value.</em></p>
            <div class="form-group row">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Experience multiplier</th>
                            <th scope="col">Decrease level on death</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Immunity</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[0].m_mod" value="${m_mainConfig.m_skillModifiers[0].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[0].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[0].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Athletics</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[1].m_mod" value="${m_mainConfig.m_skillModifiers[1].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[1].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[1].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Strength</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[2].m_mod" value="${m_mainConfig.m_skillModifiers[2].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[2].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[2].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Medicine</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[3].m_mod" value="${m_mainConfig.m_skillModifiers[3].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[3].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[3].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Stealth</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[4].m_mod" value="${m_mainConfig.m_skillModifiers[4].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[4].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[4].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Survival</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[5].m_mod" value="${m_mainConfig.m_skillModifiers[5].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[5].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[5].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Farming <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[6].m_mod" value="${m_mainConfig.m_skillModifiers[6].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[6].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[6].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Hunting</th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[7].m_mod" value="${m_mainConfig.m_skillModifiers[7].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[7].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[7].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Fishing <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[8].m_mod" value="${m_mainConfig.m_skillModifiers[8].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[8].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[8].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Mechanics <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[9].m_mod" value="${m_mainConfig.m_skillModifiers[9].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[9].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[9].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Electronics <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[10].m_mod" value="${m_mainConfig.m_skillModifiers[10].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[10].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[10].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Carpentry <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[11].m_mod" value="${m_mainConfig.m_skillModifiers[11].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[11].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[11].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Metalworking <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[12].m_mod" value="${m_mainConfig.m_skillModifiers[12].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[12].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[12].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Building <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[13].m_mod" value="${m_mainConfig.m_skillModifiers[13].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[13].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[13].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Firearms <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[14].m_mod" value="${m_mainConfig.m_skillModifiers[14].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[14].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[14].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Lockpicking <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[15].m_mod" value="${m_mainConfig.m_skillModifiers[15].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[15].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[15].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Herbalism <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[16].m_mod" value="${m_mainConfig.m_skillModifiers[16].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[16].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[16].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                        <tr>
                            <th scope="row">Seamstess <i>(Not Implemented)</i></th>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[17].m_mod" value="${m_mainConfig.m_skillModifiers[17].m_mod}" onchange="validateNumberInput(this)" required></td>
                            <td><input type="number" min="0" max="1000" step="any" class="form-control" mapping="m_mainConfig.m_skillModifiers[17].m_decreaseOnDeath" value="${m_mainConfig.m_skillModifiers[17].m_decreaseOnDeath}" onchange="validateNumberInput(this)" required></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="alert" role="alert" style="visibility: hidden" id="alertMessageSettings"></div>
            <button type="button" class="btn btn-primary btn-lg" wid onclick="savePageSettings('#settingsForm', '#alertMessageSettings')">Save</button>
        </div>
    </div>
    <div class="tab-pane" id="admins" role="tabpanel" aria-labelledby="admins-tab">
        <div id="adminsForm">
            <h3>Admin tool settings:</h3>
            <p><em>You can open the admin tool in the game with the keyboard shortcut 'Alt' + '~'. Teleport to cursor 'Alt' + 'T'.</em></p>
            <div class="form-group row">
                <label for="inputAdminsList" class="col-sm-2 col-form-label">Admin UIDs:</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="inputAdminsList" mapping="m_adminToolOptions.m_adminUids">${m_adminToolOptions.m_adminUids}</textarea>
                    <p><em>Specify UID's or SteamID64's to add new admins. Every UID should be on a new line.</em></p>
                </div>
            </div>
            <div class="alert" role="alert" style="visibility: hidden" id="alertMessageAdmins"></div>
            <button type="button" class="btn btn-primary btn-lg" wid onclick="savePageSettings('#adminsForm', '#alertMessageAdmins')">Save</button>
        </div>
    </div>
    <div class="tab-pane" id="groups" role="tabpanel" aria-labelledby="groups-tab">
        Groups
    </div>
    <div class="tab-pane" id="loadouts" role="tabpanel" aria-labelledby="loadouts-tab">
        <h3>Personal loadouts:</h3>
        <div class="input-group">
            <div class="input-group-prepend">
                <button class="btn btn-outline-secondary" type="button" id="inputLoadoutNew">New</button>
            </div>
            <select class="custom-select" id="inputLoadoutsSelect"></select>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="inputLoadoutDelete">Delete</button>
            </div>
        </div>
        <p><em>Personal Loadouts allow you to set a specific configuration of starting equipment and spawn points for a specific player. If you need to set starting equipment or spawn points for a group of players, please use the Groups tab.</em></p>
        <br>
        <h5>Loadout parameters:</h5>
        <div class="form-group row">
            <label for="inputLoadoutName" class="col-sm-2 col-form-label">Loadout name:</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputLoadoutName" required>
                <p><em>The loadout name is displayed only in the admin panel and is required only for ease to use.</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutUid" class="col-sm-2 col-form-label">Player UID:</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputLoadoutUid" required>
                <p><em>Specify the UID or SteamID64 of the player to which this ladout will be applied.</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutSpawnpointsSelect" class="col-sm-2 col-form-label">Respawn locations:</label>
            <div class="col-sm-10 input-group-btn">
                <div class="input-group-prepend">
                    <button class="btn btn-outline-secondary" type="button" id="inputLoadoutSpawnpointNew">Add</button>
                    <select class="form-control custom-select" id="inputLoadoutSpawnpointsSelect"></select>
                    <button class="btn btn-outline-secondary" type="button" id="inputLoadoutSpawnpointDelete">Remove</button>
                </div>
                <div class="row">
                    <div class="col col-sm-1">
                    </div>
                    <div class="col col-sm-11">
                        <label for="inputLoadoutSpawnpointsName">Name:</label>
                        <input type="text" class="form-control" id="inputLoadoutSpawnpointsName" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col col-sm-1">
                    </div>
                    <div class="col col-sm-11">
                        <label for="inputLoadoutSpawnpointsPositionsSelection">Points:</label>
                        <div class="input-group-prepend">
                            <button class="btn btn-outline-secondary" type="button" id="inputLoadoutSpawnpointPositionNew">Add</button>
                            <select class="form-control custom-select" id="inputLoadoutSpawnpointsPositionsSelection"></select>
                            <button class="btn btn-outline-secondary" type="button" id="inputLoadoutSpawnpointPositionDelete">Remove</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col col-sm-2">
                    </div>
                    <div class="col col-sm-6">
                        <label for="inputLoadoutSpawnpointsPosition">Position:</label>
                        <input type="text" class="form-control" onchange="validateVectorInput(this)" id="inputLoadoutSpawnpointsPosition" required>
                    </div>
                    <div class="col col-sm-4">
                        <label for="inputLoadoutSpawnpointsRadius">Radius:</label>
                        <input type="number" min="1" max="100" step="any" class="form-control" id="inputLoadoutSpawnpointsRadius" onchange="validateNumberInput(this)" required>
                    </div>
                </div>
                <br/>
                <p><em>Respawn locations allow the player to select a specific spawn location while respawning.</em><br/>
                <em>The name of the location for the respawn will be displayed in the list on the player's respawn screen.</em><br/>
                <em>The points determine the list of possible points of the player's appearance in the given location. The selection of a point from a subset of all available ones occurs randomly.</em><br/>
                <em>The position is set with 3 numbers on the XYZ axes separated by spaces. You can find out the coordinates of the player's current position in the game using the admin tools.</em><br/>
                <em>The radius allows you to set a circle relative to the position inside which the player can respawn. Please do not set the radius too high to prevent the player from getting stuck in objects.</em></p>
            </div>
        </div>
        <br>
        <br>
        <h5>Clothing & Weapons presets:</h5>
        <p><em>A list of items available for the player to select upon respawn from the list for each body part or weapon slot. The classname of each item should start on a new line. You can also set the amount and percent of damage to the item if necessary using additional parameters.</em></p>
        <div class="form-group row">
            <label for="inputLoadoutGearBody" class="col-sm-2 col-form-label">Body clothing:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearBody"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">Hoodie_Black; H0.5</span><em> - Black hoodie with 50% health (Damaged)</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearPants" class="col-sm-2 col-form-label">Pants:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearPants"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">Jeans_Blue</span><em> - Blue jeans (Pristine)</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearShoes" class="col-sm-2 col-form-label">Shoes:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearShoes"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">AthleticShoes_Black; H0.8</span><em> - Shoes with 80% health</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearHeadgears" class="col-sm-2 col-form-label">Headgears:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearHeadgears"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">BoonieHat_Olive</span><em> - Boonie Hat (Pristine)</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearMasks" class="col-sm-2 col-form-label">Masks:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearMasks"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">GasMask; @GasMask_Filter</span><em> - Gas mask with filter in attachment.</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearGloves" class="col-sm-2 col-form-label">Gloves:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearGloves"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">OMNOGloves_Gray</span></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearVests" class="col-sm-2 col-form-label">Vests:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearVests"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">PlateCarrierVest; H0.5; @PlateCarrierPouches,PlateCarrierHolster</span><em> - Damaged plate carrier with pouches and holster in attachments.</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearBackpacks" class="col-sm-2 col-form-label">Backpacks:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearBackpacks"></textarea>
                <p><em>Example:</em> <span class="badge badge-info">DryBag_Orange</span></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearWeapons" class="col-sm-2 col-form-label">Weapons:</label>
            <div class="col-sm-10">
                <textarea class="form-control" id="inputLoadoutGearWeapons"></textarea>
                <p><em>Examples:</em> <span class="badge badge-info">M4A1; @M4_CarryHandleOptic,M4_CQBBttstck,M4_RISHndgrd; &Mag_STANAGCoupled_30Rnd; H0.5</span><em> - M4A1 with attachments or </em><span class="badge badge-info">Izh43Shotgun; &Ammo_12gaPellets</span><em> - double-barreled shotgun with ammo.</em></p>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputLoadoutGearItems" class="col-sm-2 col-form-label">Item sets:</label>
            <div class="col-sm-10 input-group-btn">
                <div class="input-group-prepend">
                    <button class="btn btn-outline-secondary" type="button" id="inputLoadoutGearItemsNew">Add</button>
                    <select class="form-control custom-select" id="inputLoadoutGearItems"></select>
                    <button class="btn btn-outline-secondary" type="button" id="inputLoadoutGearItemsDelete">Remove</button>
                </div>
                <p><em>Determines the sets of items that the player can choose upon respawn. Each set can contain several items at the same time. The name of the set will be displayed to the player when choosing a starting equipment.</em></p>
                <div class="row">
                    <div class="col col-sm-1">
                    </div>
                    <div class="col col-sm-11">
                        <label for="inputLoadoutGearItemsName">Name:</label>
                        <input type="text" class="form-control" id="inputLoadoutGearItemsName" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col col-sm-1">
                    </div>
                    <div class="col col-sm-11">
                        <label for="inputLoadoutGearItemsList">Items:</label>
                        <textarea class="form-control" id="inputLoadoutGearItemsList"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="alert" role="alert" style="visibility: hidden" id="alertMessageLoadouts"></div>
        <button type="button" class="btn btn-primary btn-lg" wid onclick="">Save</button>
        <script>
            var currentLoadoutId = -1;
            var currentLoadoutSpawnpointId = -1;
            var currentLoadoutSpawnpointPosition = -1;
            var currentLoadoutItemsId = -1;
            var loadoutsDataobject = JSON.parse('#{m_customLoadouts}');

            function initializeLoadoutsSelection() {
                $('#inputLoadoutsSelect').html('');
                for (var i = 0; i < loadoutsDataobject.length; i++) {
                    let loadoutObject = loadoutsDataobject[i];
                    $('#inputLoadoutsSelect').append('<option value="' + i + '" ' + (i == (loadoutsDataobject.length - 1) ? 'selected' : '') + '>' + loadoutObject['m_displayName'] + '</option>');
                }
            }

            function initializeLoadoutsSpawnpointSelection(spawnpoints) {
                $('#inputLoadoutSpawnpointsSelect').html('');
                for (var i = 0; i < spawnpoints.length; i++) {
                    $('#inputLoadoutSpawnpointsSelect').append('<option value="' + i + '" ' + (i == (spawnpoints.length - 1) ? 'selected' : '') + '>' + spawnpoints[i]['m_name'] + '</option>');
                }
            }

            function initializeLoadoutsSpawnpointPosition(positions) {
                $('#inputLoadoutSpawnpointsPositionsSelection').html('');
                for (var i = 0; i < positions.length; i++) {
                    let pos = positions[i]['m_pos'];
                    $('#inputLoadoutSpawnpointsPositionsSelection').append('<option value="' + i + '" ' + (i == (positions.length - 1) ? 'selected' : '') + '>' + pos[0] + ' ' + pos[1] + ' ' + pos[2] + '</option>');
                }
            }

            function initializeLoadoutsGearItemsSelection(gearItems) {
                $('#inputLoadoutGearItems').html('');
                for (var i = 0; i < gearItems.length; i++) {
                    $('#inputLoadoutGearItems').append('<option value="' + i + '" ' + (i == (gearItems.length - 1) ? 'selected' : '') + '>' + gearItems[i]['m_name'] + '</option>');
                }
            }

            initializeLoadoutsSelection();

            $('#inputLoadoutsSelect').change(function () {
                let inputs = '#inputLoadoutName,#inputLoadoutUid,#inputLoadoutGearBody,#inputLoadoutGearPants,#inputLoadoutGearShoes,#inputLoadoutGearHeadgears,' +
                    '#inputLoadoutGearMasks,#inputLoadoutGearGloves,#inputLoadoutGearVests,#inputLoadoutGearBackpacks,#inputLoadoutGearWeapons,#inputLoadoutSpawnpointsSelect';
                $('#inputLoadoutSpawnpointsSelect').html('');
                $('#inputLoadoutGearItems').html('');

                let loadoutId = $(this).val() != undefined ? parseInt($(this).val()) : -1;
                if (loadoutId != -1) {
                    $(inputs).prop("disabled", false);

                    let loadout = loadoutsDataobject[loadoutId];
                    $('#inputLoadoutName').val(loadout['m_displayName']);
                    $('#inputLoadoutUid').val(loadout['m_uid']);
                    $('#inputLoadoutGearBody').val(loadout['m_gearBody'].join('\n'));
                    $('#inputLoadoutGearPants').val(loadout['m_gearPants'].join('\n'));
                    $('#inputLoadoutGearShoes').val(loadout['m_gearFoot'].join('\n'));
                    $('#inputLoadoutGearHeadgears').val(loadout['m_gearHead'].join('\n'));
                    $('#inputLoadoutGearMasks').val(loadout['m_gearMask'].join('\n'));
                    $('#inputLoadoutGearGloves').val(loadout['m_gearGloves'].join('\n'));
                    $('#inputLoadoutGearVests').val(loadout['m_gearVest'].join('\n'));
                    $('#inputLoadoutGearBackpacks').val(loadout['m_gearBackpack'].join('\n'));
                    $('#inputLoadoutGearWeapons').val(loadout['m_gearWeapon'].join('\n'));

                    initializeLoadoutsSpawnpointSelection(loadout['m_spawnpoints']);
                    initializeLoadoutsGearItemsSelection(loadout['m_gearItems']);
                }
                else {
                    $(inputs).val('');
                    $(inputs).prop("disabled", true);
                }

                currentLoadoutId = loadoutId;
                $('#inputLoadoutSpawnpointsSelect').change();
                $('#inputLoadoutGearItems').change();
            });

            $('#inputLoadoutSpawnpointsSelect').change(function () {
                let inputs = '#inputLoadoutSpawnpointsName,#inputLoadoutSpawnpointsPositionsSelection';
                $('#inputLoadoutSpawnpointsPositionsSelection').html('');

                let loadoutSpawnpointId = $(this).val() != undefined ? parseInt($(this).val()) : -1;
                if (loadoutSpawnpointId != -1 && currentLoadoutId != -1) {
                    $(inputs).prop("disabled", false);

                    let spawnpoint = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][loadoutSpawnpointId];
                    $('#inputLoadoutSpawnpointsName').val(spawnpoint['m_name']);

                    initializeLoadoutsSpawnpointPosition(spawnpoint['m_positions']);
                }
                else {
                    $(inputs).val('');
                    $(inputs).prop("disabled", true);
                }

                currentLoadoutSpawnpointId = loadoutSpawnpointId;
                $('#inputLoadoutSpawnpointsPositionsSelection').change();
            });

            $('#inputLoadoutSpawnpointsPositionsSelection').change(function () {
                let inputs = '#inputLoadoutSpawnpointsPosition,#inputLoadoutSpawnpointsRadius';

                let loadoutSpawnpointPosition = $(this).val() != undefined ? parseInt($(this).val()) : -1;
                if (loadoutSpawnpointPosition != -1 && currentLoadoutSpawnpointId != -1 && currentLoadoutId != -1) {
                    $(inputs).prop("disabled", false);

                    let position = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_positions'][loadoutSpawnpointPosition];
                    $('#inputLoadoutSpawnpointsPosition').val(position['m_pos'][0] + ' ' + position['m_pos'][1] + ' ' + position['m_pos'][2]);
                    $('#inputLoadoutSpawnpointsRadius').val(position['m_radius']);
                }
                else {
                    $(inputs).val('');
                    $(inputs).prop("disabled", true);
                }

                currentLoadoutSpawnpointPosition = loadoutSpawnpointPosition;
            });

            $('#inputLoadoutGearItems').change(function () {
                let inputs = '#inputLoadoutGearItemsName,#inputLoadoutGearItemsList';

                let loadoutItemsId = $(this).val() != undefined ? parseInt($(this).val()) : -1;
                if (loadoutItemsId != -1 && currentLoadoutId != -1) {
                    $(inputs).prop("disabled", false);

                    let itemData = loadoutsDataobject[currentLoadoutId]['m_gearItems'][loadoutItemsId];
                    $('#inputLoadoutGearItemsName').val(itemData['m_name']);
                    $('#inputLoadoutGearItemsList').val(itemData['m_items'].join('\n'));
                }
                else {
                    $(inputs).val('');
                    $(inputs).prop("disabled", true);
                }

                currentLoadoutItemsId = loadoutItemsId;
            });

            $('#inputLoadoutName').change(function () {
                if (currentLoadoutId != -1) {
                    loadoutsDataobject[currentLoadoutId]['m_displayName'] = $(this).val();
                    $('#inputLoadoutsSelect').find('option[value="' + currentLoadoutId + '"]').text($(this).val());
                }
            });
            $('#inputLoadoutUid').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_uid'] = $(this).val(); });
            $('#inputLoadoutGearBody').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearBody'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearPants').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearPants'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearShoes').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearFoot'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearHeadgears').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearHead'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearMasks').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearMask'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearGloves').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearGloves'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearVests').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearVest'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearBackpacks').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearBackpack'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutGearWeapons').change(function () { if (currentLoadoutId != -1) loadoutsDataobject[currentLoadoutId]['m_gearWeapon'] = $(this).val().split('\n').filter(n => n.trim()); });
            $('#inputLoadoutSpawnpointsName').change(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1) {
                    loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_name'] = $(this).val();
                    $('#inputLoadoutSpawnpointsSelect').find('option[value="' + currentLoadoutSpawnpointId + '"]').text($(this).val());
                }
            });
            $('#inputLoadoutSpawnpointsPosition').change(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1 && currentLoadoutSpawnpointPosition != -1) {
                    let pos = $(this).val().split(' ').map(parseFloat);
                    loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_positions'][currentLoadoutSpawnpointPosition]['m_pos'] = pos;
                    $('#inputLoadoutSpawnpointsPositionsSelection').find('option[value="' + currentLoadoutSpawnpointPosition + '"]').text($(this).val());
                }
            });
            $('#inputLoadoutSpawnpointsRadius').change(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1 && currentLoadoutSpawnpointPosition != -1) {
                    let radius = parseFloat($(this).val());
                    loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_positions'][currentLoadoutSpawnpointPosition]['m_radius'] = radius;
                }
            });
            $('#inputLoadoutGearItemsName').change(function () {
                if (currentLoadoutId != -1 && currentLoadoutItemsId != -1) {
                    loadoutsDataobject[currentLoadoutId]['m_gearItems'][currentLoadoutItemsId]['m_name'] = $(this).val();
                    $('#inputLoadoutGearItems').find('option[value="' + currentLoadoutItemsId + '"]').text($(this).val());
                }
            });
            $('#inputLoadoutGearItemsList').change(function () {
                if (currentLoadoutId != -1 && currentLoadoutItemsId != -1) {
                    loadoutsDataobject[currentLoadoutId]['m_gearItems'][currentLoadoutItemsId]['m_items'] = $(this).val().split('\n').filter(n => n.trim());
                }
            });

            $('#inputLoadoutNew').click(function () {
                loadoutsDataobject.push({
                    m_displayName: 'Loadout ' + (loadoutsDataobject.length + 1),
                    m_uid: '',
                    m_spawnpoints: [],
                    m_gearBody: [],
                    m_gearPants: [],
                    m_gearFoot: [],
                    m_gearHead: [],
                    m_gearMask: [],
                    m_gearGloves: [],
                    m_gearVest: [],
                    m_gearBackpack: [],
                    m_gearWeapon: [],
                    m_gearItems: []
                });

                initializeLoadoutsSelection();
                $('#inputLoadoutsSelect').change();
            });
            $('#inputLoadoutDelete').click(function () {
                if (currentLoadoutId != -1) {
                    if (confirm('Are you sure you want to delete current loadout?')) {
                        loadoutsDataobject.remove(currentLoadoutId);
                        initializeLoadoutsSelection();
                        $('#inputLoadoutsSelect').change();
                    }
                }
            });

            $('#inputLoadoutSpawnpointNew').click(function () {
                if (currentLoadoutId != -1) {
                    let spawnpoints = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'];
                    spawnpoints.push({
                        m_name: 'Location ' + (spawnpoints.length + 1),
                        m_positions: []
                    });

                    initializeLoadoutsSpawnpointSelection(spawnpoints);
                    $('#inputLoadoutSpawnpointsSelect').change();
                }
            });
            $('#inputLoadoutSpawnpointDelete').click(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1) {
                    if (confirm('Are you sure you want to delete current spawn location?')) {
                        let spawnpoints = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'];
                        spawnpoints.remove(currentLoadoutSpawnpointId);
                        initializeLoadoutsSpawnpointSelection(spawnpoints);
                        $('#inputLoadoutSpawnpointsSelect').change();
                    }
                }
            });

            $('#inputLoadoutSpawnpointPositionNew').click(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1) {
                    let positions = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_positions'];
                    positions.push({
                        m_pos: [0, 0, 0],
                        m_radius: 1
                    });

                    initializeLoadoutsSpawnpointPosition(positions);
                    $('#inputLoadoutSpawnpointsPositionsSelection').change();
                }
            });
            $('#inputLoadoutSpawnpointPositionDelete').click(function () {
                if (currentLoadoutId != -1 && currentLoadoutSpawnpointId != -1 && currentLoadoutSpawnpointPosition != -1) {
                    let positions = loadoutsDataobject[currentLoadoutId]['m_spawnpoints'][currentLoadoutSpawnpointId]['m_positions'];
                    positions.remove(currentLoadoutSpawnpointPosition);
                    initializeLoadoutsSpawnpointPosition(positions);
                    $('#inputLoadoutSpawnpointsPositionsSelection').change();
                }
            });

            $('#inputLoadoutGearItemsNew').click(function () {
                if (currentLoadoutId != -1) {
                    let gearItems = loadoutsDataobject[currentLoadoutId]['m_gearItems'];
                    gearItems.push({
                        m_name: 'Items Set ' + (gearItems.length + 1),
                        m_items: []
                    });

                    initializeLoadoutsGearItemsSelection(gearItems);
                    $('#inputLoadoutGearItems').change();
                }
            });
            $('#inputLoadoutGearItemsDelete').click(function () {
                if (currentLoadoutId != -1 && currentLoadoutItemsId != -1) {
                    if (confirm('Are you sure you want to delete current loadout items set?')) {
                        let gearItems = loadoutsDataobject[currentLoadoutId]['m_gearItems'];
                        gearItems.remove(currentLoadoutItemsId);
                        initializeLoadoutsGearItemsSelection(gearItems);
                        $('#inputLoadoutGearItems').change();
                    }
                }
            });

            $('#inputLoadoutsSelect').change();
        </script>
    </div>
    <div class="tab-pane" id="traders" role="tabpanel" aria-labelledby="traders-tab">
        Traders
    </div>
    <div class="tab-pane" id="zones" role="tabpanel" aria-labelledby="zones-tab">
        Zones
    </div>
    <div class="tab-pane" id="variables" role="tabpanel" aria-labelledby="variables-tab">
        Variables
    </div>
</div>
<script>
    function validateVectorInput(field) {
        var value = $(field).val();
        var parts = value.split(' ');
        while (parts.length < 3) {
            parts.push('0');
        }
        while (parts.length > 3) {
            parts.pop();
        }
        for (var i = 0; i < parts.length; i++) {
            var num = parseFloat(parts[i]);
            if (isNaN(num)) {
                num = 0;
            }
            parts[i] = num.toString();
        }
        $(field).val(parts[0] + ' ' + parts[1] + ' ' + parts[2]);
    }

    function validateNumberInput(field) {
        if ($(field).attr('step') && $(field).attr('step') === '1') {
            $(field).val(Math.round(parseFloat($(field).val())));
        }
        if ($(field).attr('min') && $(field).val() < parseFloat($(field).attr('min'))) {
            $(field).val(parseFloat($(field).attr('min')));
        }
        if ($(field).attr('max') && $(field).val() > parseFloat($(field).attr('max'))) {
            $(field).val(parseFloat($(field).attr('max')));
        }
        if ($(field).attr('pattern') && new RegExp($(field).attr('pattern')).test($(field).val()) === false) {
            $(field).val($(field).attr('min') ? $(field).attr('min') : 0);
        }
    }

    function savePageSettings(rootElement, alertMessage) {
        var requestData = {
            auth: userData,
            data: readPageValues(rootElement)
        };

        $.post("/save", JSON.stringify(requestData), function (data) {
            $(alertMessage).removeClass('alert-danger');
            $(alertMessage).addClass('alert-success');
            $(alertMessage).html('Changes successfully saved. Please restart DayZ server to apply them.');
            $(alertMessage).css('visibility', 'visible');
            console.log('Settings successfully changed.');
        }).fail(function (err) {
            $(alertMessage).removeClass('alert-success');
            $(alertMessage).addClass('alert-danger');
            $(alertMessage).html(err.status == 0 ? 'Service is unreachable. Please check is server running or internet connection.' : 'Internal server error. Failed to save changes.');
            $(alertMessage).css('visibility', 'visible');
            console.error('Failed to change settings.');
        });
    };

    function readPageValues(rootElement) {
        var dataObject = {};
        $(rootElement).find('[mapping]').each(function () {
            var result = null;
            let val = $(this).val();
            if ($(this).is("input")) {
                let type = $(this).attr('type');
                if (type == 'number') {
                    result = parseFloat(val);
                }
                else if (type == 'checkbox') {
                    result = $(this).is(":checked") ? 1 : 0;
                }
                else {
                    result = String(val);
                }
            }
            else if ($(this).is("textarea")) {
                result = val.split('\n').filter(n => n.trim());
            }

            let refPath = $(this).attr('mapping');
            let refParts = refPath.split('.');
            var currentObject = dataObject;
            for (var i = 0; i < refParts.length; i++) {
                let part = refParts[i];
                let last = (i == refParts.length - 1);
                if (part.endsWith(']')) {
                    let name = part.substring(0, part.indexOf('['));
                    let index = parseInt(part.substring(part.indexOf('[') + 1, part.length - 1));
                    if (!currentObject[name]) {
                        currentObject[name] = [];
                    }
                    if (last) {
                        currentObject[name][index] = result;
                    }
                    else if (!currentObject[name][index]) {
                        currentObject[name][index] = {};
                    }
                    currentObject = currentObject[name][index];
                }
                else {
                    if (last) {
                        currentObject[part] = result;
                    }
                    else if (!currentObject[part]) {
                        currentObject[part] = {};
                    }
                    currentObject = currentObject[part];
                }
            }
        });
        return dataObject;
    };

    Array.prototype.remove = function (from, to) {
        var rest = this.slice((to || from) + 1 || this.length);
        this.length = from < 0 ? this.length + from : from;
        return this.push.apply(this, rest);
    };
</script>
